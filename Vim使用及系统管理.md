# Vim使用及系统管理

## 目录

[三种使用模式](#jump1)

[Vim 按键说明](#jump2)

[账号管理](#jump3)

[用户组管理](#jump4)

[了解：关于账户、密码的几个文件](#jump5)

[磁盘管理](#jump6)

[进程管理](#jump7)

---	

<span id="jump1"></span>

## 三种使用模式

### 命令模式

输入vim 文件名，会创建文件（无该文件名）或修改文件（有改文件名），并进入命令模式

此状态下敲击键盘动作会被Vim识别为命令，而非输入字符

以下是常用的几个命令：

```
i			切换到输入模式，以输入字符。

x			删除当前光标所在处的字符。

:			切换到底线命令模式，以在最底一行输入命令
```

### 输入模式

在命令模式下按下i就进入了输入模式

在输入模式中，可以使用以下按键：

```
字符按键以及Shift组合，输入字符

ENTER			回车键，换行

BACK SPACE		退格键，删除光标前一个字符

DEL			删除键，删除光标后一个字符

方向键			在文本中移动光标

HOME/END		移动光标到行首/行尾

Page Up/Page Down	上/下翻页

Insert			切换光标为输入/替换模式，光标将变成竖线/下划线

ESC			退出输入模式，切换到命令模式
```

### 底线命令模式

在命令模式下按下:（英文冒号）就进入了底线命令模式

基本的命令有：

```
q			退出程序

w			保存文件

ESC			退出底线命令模式，切换到命令模式
```

---

<span id="jump2"></span>

## Vim 按键说明

### 移动光标的方法

```
箭头			移动光标

n< space>		光标向右移动这一行的 n 个字符

n< Enter>		光标向下移动 n 行

0 或功能键[Home]	移动到这一行的最前面字符处

$ 或功能键[End]		移动到这一行的最后面字符处

gg			移动到这个档案的第一行

[Ctrl] + [f]		屏幕『向下』移动一页，相当于 [Page Down]按键

[Ctrl] + [b]		屏幕『向上』移动一页，相当于 [Page Up] 按键 
```

### 搜索替换

```
/word			向光标之下寻找一个名称为 word 的字符串

n			重复前一个搜寻的动作

N			与 n 刚好相反，为『反向』进行前一个搜寻动作
```

---

<span id="jump3"></span>

## 账号管理

### 简介

Linux系统是一个多用户多任务的分时操作系统

任何一个要使用系统资源的用户，都必须首先向系统管理员申请一个账号，然后以这个账号的身份进入系统

### 添加账号 useradd

语法：

```shell
useradd 选项 用户名
```

参数说明：

- 选项 :

```
-c comment 指定一段注释性描述。

-d 目录 指定用户主目录，如果此目录不存在，则同时使用-m选项，可以创建主目录。

-g 用户组 指定用户所属的用户组。

-G 用户组，用户组 指定用户所属的附加组。

-m　使用者目录如不存在则自动建立。

-s Shell文件 指定用户的登录Shell。

-u 用户号 指定用户的用户号，如果同时有-o选项，则可以重复使用其他用户的标识号
```

- 用户名 :

```
指定新账号的登录名
```

### 删除帐号

语法：

```shell
userdel 选项 用户名
```

常用的选项是 -r，它的作用是把用户的主目录一起删除

### 修改帐号

语法：

```shell
usermod 选项 用户名
```

常用的选项包括-c, -d, -m, -g, -G, -s, -u以及-o等，这些选项的意义与useradd命令中的选项一样

### Linux下如何切换用户

1.切换用户的命令为：su username 

2.从普通用户切换到root用户，还可以使用命令：sudo su

3.在终端输入exit或logout或使用快捷方式ctrl+d，可以退回到原来用户，其实ctrl+d也是执行的exit命令

4.在切换用户时，如果想在切换用户之后使用新用户的工作环境，可以在su和username之间加-，例如：【su - root】

"$"表示普通用户

"#"表示超级用户，也就是root用户

### 用户口令的管理

命令的格式为：

```shell
passwd 选项 用户名
```

可使用的选项：

```
-l 锁定口令，即禁用账号。

-u 口令解锁。

-d 使账号无口令。

-f 强迫用户下次登录时修改口令
```

如果是超级用户，可以用下列形式指定任何用户的口令：

```shell
# passwd 任意用户名
New password:
Re-enter new password:
```

---

<span id="jump4"></span>

## 用户组管理

用户组的管理涉及用户组的添加、删除和修改

组的增加、删除和修改实际上就是对/etc/group文件的更新

### groupadd

增加一个新的用户组

语法：

```shell
groupadd 选项 用户组
```

可以使用的选项有：

```
-g GID 指定新用户组的组标识号（GID）。

-o 一般与-g选项同时使用，表示新用户组的GID可以与系统已有用户组的GID相同
```

### groupdel

删除一个已有的用户组

语法：

```shell
groupdel 用户组
```

### groupmod

修改用户组的属性

语法：

```shell
groupmod 选项 用户组
```

常用的选项有：

```
-g GID 为用户组指定新的组标识号。

-o 与-g选项同时使用，用户组的新GID可以与系统已有用户组的GID相同。

-n新用户组 将用户组的名字改为新名字
```

### 切换组

如果一个用户同时属于多个用户组，那么用户可以在用户组之间切换，以便具有其他用户组的权限

语法：

```shell
$ newgrp 目标用户组名
```

---

<span id="jump5"></span>

## 了解：关于账户、密码的几个文件

### /etc/passwd

/etc/passwd中一行记录对应着一个用户

每行记录又被冒号(:)分隔为7个字段，其格式和具体含义如下：

```
用户名:口令:用户标识号:组标识号:注释性描述:主目录:登录Shell
```

### /etc/shadow

/etc/shadow中的记录行与/etc/passwd中的一一对应，它由pwconv命令根据/etc/passwd中的数据自动产生

它的文件格式与/etc/passwd类似，由若干个字段组成，字段之间用":"隔开。这些字段是：

```
登录名:加密口令:最后一次修改时间:最小时间间隔:最大时间间隔:警告时间:不活动时间:失效时间:标志
```

### /etc/group

用户组的所有信息都存放在/etc/group文件中

此文件的格式也类似于/etc/passwd文件，由冒号(:)隔开若干个字段，这些字段有：

```
组名:口令:组标识号:组内用户列表
```

---

<span id="jump6"></span>

## 磁盘管理

### df

disk free  查看磁盘还剩余多少

常用来获取当前挂载磁盘的使用情况

语法：

```shell
df [-ahikHTm] [目录或文件名]
```

选项与参数：

```
-a ：列出所有的文件系统，包括系统特有的 /proc 等文件系统；

-k ：以 KBytes 的容量显示各文件系统；

-m ：以 MBytes 的容量显示各文件系统；

-h ：以人们较易阅读的 GBytes, MBytes, KBytes 等格式自行显示；

-H ：以 M=1000K 取代 M=1024K 的进位方式；

-T ：显示文件系统类型, 连同该 partition 的 filesystem 名称 (例如 ext3) 也列出；

-i ：不用硬盘容量，而以 inode 的数量来显示
```

### du

disk usage  查看磁盘已使用多少

常用来查看当前目录哪个文件占用较多

---

<span id="jump7"></span>

## 进程管理

### ps

语法：

```shell
ps -x
```

选项：

```
-a 显示当前终端运行的所有进程信息

-u 以用户的信息显示进程

-x 显示后台运行进程的参数
```

### |和grep

| 管道符，左边的结果作为右边的输入

grep 查找符合条件的字符串

一个常用的组合命令：

```shell
ps -aux|grep 进程名
```

表示查看符合“进程名”条件的所有进程

### pstree

查看进程树

语法：

```shell
pstree -x
```

选项：

```
-p 显示父id

-u 显示用户组
```

### 结束进程

```shell
kill -9 进程id
```
